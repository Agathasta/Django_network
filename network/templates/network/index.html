{% extends "network/layout.html" %}

{% block body %}

<!-- Three different headings for All Posts, Profile Posts and Following Posts -->

<!-- ALL POSTS -->
{% if postlist == "all" %}
<section>
    <h2>ALL POSTS</h2>

    {% if user.is_authenticated %}
    <form id="postform" method="post">
        {% csrf_token %}
        {{ form.post }}
        <input type="submit" value="go">
    </form>
    {% endif %}
</section>
{% endif %}

<!-- PROFILE PAGE -->
{% if postlist == "profile" %}
<section>
    <h2>{{ profileUser.username }}'s page</h2>
</section>
{% endif %}

<!-- FOLLOWOD POSTS -->
{% if postlist == "following" %}
<section></section>
{% endif %}

<!-- List of posts filtered (All, Profile or Following) -->
<section id="postlist" class="posts">
    {% for post in page_obj %}
    <article class="post">
        <a href="{% url 'profile' post.user.username %}">
            <div class="post-user">{{ post.user.username }}</div>
        </a>
        <div class="post-time">{{ post.timestamp }}</div>
        <div class="post-message">{{ post.post }}</div>
        <div class="post-likes"><span class="far fa-heart"></span>{{ post.liked_by.count }}</div>
    </article>
    {% endfor %}
</section>

<nav class="pages">
    {% if page_obj.has_previous %}
    <a href="?page=1" class="page page-general">&laquo; first</a>
    <a href="?page={{ page_obj.previous_page_number }}" class="page page-general">{{ page_obj.previous_page_number}}</a>
    {% else %}
    <span aria-hidden="true" class="page page-inactive">&laquo; first</span>
    {% endif %}

    <span class="page page-current">{{ page_obj.number }}</span>

    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}" class="page page-general">{{ page_obj.next_page_number }}</a>
    <a href="?page={{ page_obj.paginator.num_pages }}" class="page page-general">last &raquo;</a>
    {% else %}
    <span aria-hidden="true" class="page page-inactive">last &raquo;</span>
    {% endif %}
</nav>

{% endblock %}

<!-- https://www.pluralsight.com/guides/work-with-ajax-django -->